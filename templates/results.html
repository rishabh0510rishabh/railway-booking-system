{% extends 'base.html' %}

{% block content %}
  <h1 class="display-6 mb-4">Showing trains from {{ source }} to {{ destination }}</h1>

  {% if trains %}
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Train Name</th>
          <th>Departs at</th>
          <th>Travel Time</th>
          <th>Available Seats</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for train in trains %}
          <tr>
            <td>
              {{ train.train_name }}
              <br>
              <a href="{{ url_for('train_route', train_id=train.id) }}" class="btn btn-link btn-sm p-0">View Route</a>
            </td>
            <td>{{ train.departure_time }}</td>
            <td>{{ train.travel_time }}</td>
            <td>
              {% if train.available_seats > 20 %}
                <span class="badge bg-success">Available: {{ train.available_seats }}</span>
              {% elif train.available_seats > 0 %}
                <span class="badge bg-warning text-dark">Filling Fast: {{ train.available_seats }}</span>
              {% else %}
                <span class="badge bg-danger">Waitlisted</span>
              {% endif %}
            </td>
            <td>
              <a href="{{ url_for('book', train_id=train.id) }}" class="btn btn-sm btn-primary">Book Now</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="alert alert-warning" role="alert">
      No trains found for this route.
    </div>
  {% endif %}

  <a href="/" class="btn btn-secondary mt-3">Search Again</a>
{% endblock %}
