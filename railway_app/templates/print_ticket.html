<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-Ticket - {{ booking.pnr_number }}</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f4f6f9;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .ticket-container {
            background: white;
            width: 700px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
        }
        /* Header */
        .ticket-header {
            background: linear-gradient(135deg, #0d47a1, #1976d2);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .brand { font-size: 24px; font-weight: 700; letter-spacing: 1px; }
        .pnr-status { text-align: right; }
        .pnr-status span { display: block; font-size: 14px; opacity: 0.9; }
        .pnr-status strong { font-size: 18px; color: #ffeb3b; }

        /* Body */
        .ticket-body { padding: 30px; display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .section-title {
            color: #0d47a1;
            font-weight: 700;
            margin-bottom: 15px;
            border-bottom: 2px solid #e3e6f0;
            padding-bottom: 5px;
            text-transform: uppercase;
            font-size: 14px;
        }
        .info-row { margin-bottom: 12px; font-size: 15px; color: #333; }
        .info-row i { color: #555; width: 25px; text-align: center; margin-right: 8px; }
        .label { color: #666; font-size: 13px; }
        .value { font-weight: 500; color: #000; }

        /* Footer / QR */
        .ticket-footer {
            background-color: #f8f9fa;
            padding: 20px 30px;
            border-top: 1px dashed #ccc;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .fare-box {
            background: #e8f5e9;
            color: #2e7d32;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 18px;
            border: 1px solid #c8e6c9;
        }
        .qr-code img { width: 100px; height: 100px; border: 4px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        
        /* Print Button (Hidden when printing) */
        .print-btn-container { text-align: center; margin-top: 20px; }
        .btn { padding: 10px 20px; background: #0d47a1; color: white; text-decoration: none; border-radius: 5px; cursor: pointer; border: none; font-size: 16px; }
        
        @media print {
            body { background: white; }
            .ticket-container { box-shadow: none; border: 1px solid #ddd; width: 100%; }
            .print-btn-container { display: none; }
        }
    </style>
</head>
<body>

    <div>
        <div class="ticket-container">
            <div class="ticket-header">
                <div class="brand"><i class="fas fa-train"></i> RAILWAY E-TICKET</div>
                <div class="pnr-status">
                    <span>PNR NUMBER</span>
                    <strong>{{ booking.pnr_number }}</strong>
                </div>
            </div>

            <div class="ticket-body">
                <div class="col">
                    <div class="section-title">Passenger Details</div>
                    <div class="info-row"><i class="fas fa-user"></i> <span class="label">Name:</span> <span class="value">{{ booking.passenger_name }}</span></div>
                    <div class="info-row"><i class="fas fa-child"></i> <span class="label">Age:</span> <span class="value">{{ booking.passenger_age }} Years</span></div>
                    <div class="info-row"><i class="fas fa-bed"></i> <span class="label">Berth:</span> <span class="value">{{ booking.berth_preference or 'No Preference' }}</span></div>
                    <div class="info-row"><i class="fas fa-check-circle"></i> <span class="label">Status:</span> <span class="value" style="color: green;">{{ booking.status }}</span></div>
                </div>

                <div class="col">
                    <div class="section-title">Journey Details</div>
                    <div class="info-row"><i class="fas fa-subway"></i> <span class="label">Train:</span> <span class="value">{{ booking.train.train_name }}</span></div>
                    <div class="info-row"><i class="fas fa-map-marker-alt"></i> <span class="label">Route:</span> <span class="value">{{ booking.train.source }} <i class="fas fa-arrow-right" style="font-size: 10px; width:auto;"></i> {{ booking.train.destination }}</span></div>
                    <div class="info-row"><i class="fas fa-chair"></i> <span class="label">Class:</span> <span class="value">{{ booking.seat_class }}</span></div>
                    <div class="info-row"><i class="fas fa-ticket-alt"></i> <span class="label">Seat:</span> <span class="value">{{ booking.seat_number or 'Allocated later' }}</span></div>
                </div>
            </div>

            <div class="ticket-footer">
                <div class="qr-code">
                    <img src="data:image/png;base64,{{ qr_code }}" alt="QR Code">
                </div>
                <div class="fare-box">
                    Total Fare: ${{ booking.fare }}
                </div>
            </div>
        </div>

        <div class="print-btn-container">
            <button onclick="window.print()" class="btn"><i class="fas fa-print"></i> Print Ticket</button>
            <a href="{{ url_for('booking.download_ticket', pnr=booking.pnr_number) }}" class="btn" style="background-color: #28a745; margin-left: 10px;"><i class="fas fa-file-pdf"></i> Download PDF</a>
        </div>
    </div>

</body>
</html>